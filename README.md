# MOC (Minecraft Of Characters) - 마인크래프트 오프 캐릭터즈

MOC는 마인크래프트 내에서 캐릭터별 고유 능력을 활용하여 배틀을 펼치는 PvP 미니게임 플러그인입니다. 라운드 기반의 자동화된 게임 진행, 능력 드래프트 시스템, 점수 집계 기능을 제공합니다.

---

## 📋 목차

1. [게임 개요](#게임-개요)
2. [설치 및 실행](#설치-및-실행)
3. [명령어 가이드](#명령어-가이드)
4. [게임 진행 흐름](#게임-진행-흐름)
5. [구현된 캐릭터 능력](#구현된-캐릭터-능력)
6. [설정 (Configuration)](#설정-configuration)

---

## 🎮 게임 개요

이 플러그인은 다음과 같은 게임 루프를 자동으로 관리합니다:

- **능력 추첨 (Draft)**: 매 라운드마다 랜덤한 능력을 부여받고, 리롤하거나 확정합니다.
- **전투 (Battle)**: 제한된 구역(자기장) 내에서 전투를 벌입니다.
- **점수 (Scoring)**: 킬(1점) 및 생존(2점) 점수를 누적합니다.
- **우승 (Winning)**: 특정 점수(예: 40점)에 도달한 플레이어가 나오면 게임이 종료됩니다.

### 기본 지급 아이템 및 스탯

- **체력**: 3줄 (하트 30칸, 수치는 60)
- **아이템**: 철 칼, 구운 소고기 64개, 물 양동이, 유리 10개, 철 흉갑

---

## 🚀 설치 및 실행

### 요구 사항

- Java 17 이상
- Minecraft Spigot/Paper 서버 (1.19+ 권장)

### 설치

1. `build/libs/MocPlugin-1.0-SNAPSHOT.jar` 파일을 서버의 `plugins` 폴더에 넣습니다.
2. 서버를 시작하거나 리로드합니다.

---

## 💻 명령어 가이드

### 🛠 관리자 명령어 (OP 권한 필요)

게임 설정 및 진행을 제어합니다.

| 명령어 | 설명 |
|--------|------|
| `/moc config` | 현재 게임 설정(목표 점수, 자기장 시간 등)을 확인합니다. |
| `/moc start` | 설정을 기반으로 게임을 시작합니다. |
| `/moc afk <닉네임>` | 특정 플레이어를 잠수(참가 제외) 상태로 설정합니다. |
| `/moc team <팀명> <닉네임>` | 특정 플레이어를 지정된 팀으로 설정합니다. |
| `/moc teamrandom` | 모든 참가자를 랜덤하게 팀으로 배정합니다. (홀수 시 1인 팀 발생) |
| `/moc teamlist` | 현재 팀 배정 현황을 확인합니다. |

### 👤 플레이어 명령어 (능력 추첨 단계)

능력 추첨 단계에서만 사용할 수 있습니다.

| 명령어 | 설명 |
|--------|------|
| `/moc check` | 배정받은 능력의 상세 설명을 확인합니다. (비공개) |
| `/moc yes` | 현재 능력을 수락하고 게임 준비를 완료합니다. |
| `/moc re` | 능력을 다시 뽑습니다. (라운드당 1회 제한) |

---

## 🔄 게임 진행 흐름

### 1. 게임 준비 및 시작

- 관리자가 참여 인원, 팀, AFK 여부를 설정합니다.
- `/moc start` 입력 시 게임 모드, 스폰 좌표, 참가자 목록이 출력됩니다.

### 2. 능력 추첨 단계 (Draft Phase)

- 모든 플레이어에게 무작위 능력이 배정됩니다. (중복 방지 로직 적용)
- 플레이어는 `/moc check`로 능력을 확인하고, `/moc re`로 1회 변경하거나 `/moc yes`로 확정해야 합니다.
- 전원이 확정(yes)하면 전투 단계로 넘어갑니다.

### 3. 전투 단계 (Battle Phase)

#### 초기화
- 인벤토리, 버프, 체력/배고픔이 초기화되며, 맵의 떨어진 아이템과 몬스터가 삭제됩니다.

#### 맵 세팅
- 스폰 위치 기준 에메랄드 블럭 생성, 기반암 바닥 및 장벽(Border) 재설정.

#### 텔레포트
- 스폰 구역 내 랜덤 위치로 이동 후 3초 카운트다운(무적)과 함께 시작됩니다.

#### 점수
- **킬**: +1점
- **생존(1위)**: +2점

### 4. 라운드 종료 및 결과

- 최후의 1인이 남으면 해당 라운드가 종료됩니다.
- 현재 누적 점수 순위를 채팅창에 내림차순으로 공지합니다.

#### 우승 판정
- **40점 이상 획득자가 없으면** → 능력 추첨 단계(2번)로 돌아가 다음 라운드 진행.
- **40점 이상 획득자가 있으면** → 게임 종료 단계(5번)로 이동.

### 5. 게임 종료 (Game Over)

- 최종 1, 2, 3등을 발표합니다. (아이콘 표시: 💎다이아, 🥈철, 🥉구리)
- 상위권 플레이어 위치에 축하 폭죽을 발사하고 게임을 종료합니다.

---

## ⚡ 구현된 캐릭터 능력 (Abilities)

현재 소스 코드(`src/main/java/me/user/moc/ability/impl`)에 구현된 능력 목록입니다.

- **Magnus** (매그너스)
- **Midas** (마이다스)
- **Olaf** (올라프)
- **Rammus** (람머스)
- **Saitama** (사이타마)
- **Ueki** (우에키)
  - **유틸리티 능력**: 묘목을 우클릭하여 주변에 떨어진 아이템(쓰레기)을 나무로 변환합니다.

---

## ⚙️ 설정 (Configuration)

`config.yml` 파일을 통해 다음 항목을 조정할 수 있습니다 (추후 구현 예정 사항 포함).

- **Goal Score**: 게임 종료 목표 점수 (기본값: 40)
- **Border Time**: 자기장이 줄어드는 시간
- **Spawn Location**: 게임 시작 기준 좌표

# 프로그인 등록 후 버킷에 bukkit:reload confirm 입력하기